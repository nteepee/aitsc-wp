/**
 * Layout Fixes for AITSC Pro Theme
 * Addresses critical UI/UX scrolling and container visibility issues
 *
 * @version 1.0.0
 * @date 2025-12-03
 */

/*--------------------------------------------------------------
>>> LAYOUT CRITICAL FIXES
--------------------------------------------------------------*/

/* Fix main content positioning to account for fixed header */
.site-content {
    margin-top: 0 !important;
    padding-top: 120px !important; /* Account for fixed header height */
    position: relative;
    z-index: 1;
    background-color: var(--aitsc-bg-primary, #ffffff);
}

/* Ensure containers remain visible during scroll */
.container,
.container-fluid,
.hero-container,
.solutions-container,
.case-studies-container {
    position: relative !important;
    z-index: 2 !important;
    opacity: 1 !important;
    visibility: visible !important;
    transform: none !important;
}

/* Fix header z-index layering */
.site-header {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    z-index: 1000 !important;
    background-color: rgba(10, 10, 10, 0.95) !important;
    backdrop-filter: blur(10px) !important;
    transition: all 0.3s ease !important;
    height: auto !important;
}

/* Fix mobile navigation z-index */
.mobile-navigation {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    z-index: 999 !important;
    transform: translateX(-100%) !important;
    transition: transform 0.3s ease !important;
    overflow-y: auto !important;
}

/* Ensure footer stays at bottom with proper z-index */
.site-footer {
    position: relative !important;
    z-index: 5 !important;
    margin-top: var(--space-20, 5rem) !important;
    background-color: var(--primary-darker, #0a0a0a) !important;
    color: var(--text-secondary, #666666) !important;
}

/*--------------------------------------------------------------
>>> HERO SECTION FIXES
--------------------------------------------------------------*/

.hero-section {
    position: relative !important;
    z-index: 1 !important;
    min-height: 100vh !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    overflow: hidden !important;
}

.hero-background {
    position: absolute !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    z-index: 0 !important;
}

.hero-overlay {
    position: absolute !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    z-index: 1 !important;
    background: linear-gradient(135deg,
        rgba(0, 102, 255, 0.1) 0%,
        rgba(0, 102, 255, 0.05) 50%,
        transparent 100%) !important;
}

.hero-gradient {
    position: absolute !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    z-index: 2 !important;
    background: radial-gradient(circle at center,
        rgba(0, 102, 255, 0.1) 0%,
        transparent 70%) !important;
}

.hero-container {
    position: relative !important;
    z-index: 10 !important;
    max-width: 1200px !important;
    margin: 0 auto !important;
    padding: var(--space-12, 3rem) !important;
    text-align: center !important;
}

.hero-content {
    max-width: 800px !important;
    margin: 0 auto !important;
    position: relative !important;
    z-index: 20 !important;
}

/*--------------------------------------------------------------
>>> SECTION SPACING FIXES
--------------------------------------------------------------*/

/* Add proper spacing after hero section */
.solutions-section,
.case-studies-section,
.testimonials-section {
    margin-top: var(--space-20, 5rem) !important;
    padding-top: var(--space-16, 4rem) !important;
    position: relative !important;
    z-index: 2 !important;
}

/* Ensure all sections have proper container structure */
.section {
    position: relative !important;
    z-index: 2 !important;
    overflow: visible !important;
}

.section .container {
    position: relative !important;
    z-index: 3 !important;
    background-color: transparent !important;
}

/*--------------------------------------------------------------
>>> NAVIGATION FIXES
--------------------------------------------------------------*/

/* Desktop navigation fixes */
.desktop-navigation {
    position: relative !important;
    z-index: 1001 !important;
}

.header-container {
    display: flex !important;
    align-items: center !important;
    justify-content: space-between !important;
    padding: var(--aitsc-space-md, 1rem) 0 !important;
    position: relative !important;
    z-index: 1002 !important;
}

/* Mobile menu fixes */
.mobile-menu.active {
    opacity: 1 !important;
    visibility: visible !important;
    z-index: 1001 !important;
}

.mobile-menu-container {
    background-color: var(--aitsc-bg-card, #ffffff) !important;
    border-radius: var(--aitsc-radius-xl, 1rem) !important;
    padding: var(--aitsc-space-2xl, 2rem) !important;
    max-width: 400px !important;
    width: 90% !important;
    max-height: 80vh !important;
    overflow-y: auto !important;
    transform: scale(0.9) !important;
    transition: transform var(--aitsc-transition-normal, 0.3s ease) !important;
    position: relative !important;
    z-index: 1002 !important;
}

.mobile-menu.active .mobile-menu-container {
    transform: scale(1) !important;
}

/*--------------------------------------------------------------
>>> CONTENT LAYERING FIXES
--------------------------------------------------------------*/

/* Fix content disappearing behind header */
main#main-content {
    position: relative !important;
    z-index: 10 !important;
    margin-top: 0 !important;
    padding-top: 120px !important; /* Match header height */
}

/* Cards and interactive elements */
.card,
.solution-card,
.case-study-card {
    position: relative !important;
    z-index: 5 !important;
    background-color: var(--aitsc-bg-card, #ffffff) !important;
    border-radius: var(--aitsc-radius-lg, 0.5rem) !important;
    box-shadow: var(--aitsc-shadow-md, 0 4px 6px -1px rgba(0, 0, 0, 0.1)) !important;
    transition: transform 0.3s ease, box-shadow 0.3s ease !important;
}

.card:hover,
.solution-card:hover,
.case-study-card:hover {
    transform: translateY(-2px) !important;
    box-shadow: var(--aitsc-shadow-lg, 0 10px 15px -3px rgba(0, 0, 0, 0.1)) !important;
    z-index: 6 !important;
}

/*--------------------------------------------------------------
>>> SCROLL BEHAVIOR FIXES
--------------------------------------------------------------*/

/* Ensure smooth scrolling doesn't break layout */
html {
    scroll-behavior: smooth !important;
    scroll-padding-top: 120px !important; /* Account for fixed header */
}

/* Fix focus states for keyboard navigation */
.skip-link {
    position: absolute !important;
    top: -40px !important;
    left: 6px !important;
    background: var(--aitsc-primary, #0066ff) !important;
    color: white !important;
    padding: 8px !important;
    text-decoration: none !important;
    z-index: 10000 !important;
    border-radius: 4px !important;
    transition: top 0.3s ease !important;
}

.skip-link:focus {
    top: 6px !important;
}

/*--------------------------------------------------------------
>>> RESPONSIVE FIXES
--------------------------------------------------------------*/

/* Mobile fixes */
@media (max-width: 767.98px) {
    .site-content {
        padding-top: 100px !important; /* Smaller header on mobile */
    }

    .hero-container {
        padding: var(--space-8, 2rem) var(--space-6, 1.5rem) !important;
    }

    .hero-title {
        font-size: var(--aitsc-font-2xl, 1.5rem) !important;
        line-height: 1.2 !important;
    }

    .hero-subtitle {
        font-size: var(--aitsc-font-base, 1rem) !important;
    }

    html {
        scroll-padding-top: 100px !important;
    }
}

/* Tablet fixes */
@media (min-width: 768px) and (max-width: 1023.98px) {
    .site-content {
        padding-top: 110px !important;
    }

    .hero-container {
        padding: var(--space-10, 2.5rem) !important;
    }

    html {
        scroll-padding-top: 110px !important;
    }
}

/* Desktop fixes */
@media (min-width: 1024px) {
    .site-content {
        padding-top: 120px !important;
    }

    .hero-container {
        padding: var(--space-16, 4rem) !important;
    }

    html {
        scroll-padding-top: 120px !important;
    }
}

/*--------------------------------------------------------------
>>> ANIMATION PRESERVATION
--------------------------------------------------------------*/

/* Preserve existing animations while fixing layout */
.hero-word {
    display: inline-block !important;
    opacity: 0 !important;
    transform: translateY(20px) !important;
    animation: fadeInUp 0.8s ease forwards !important;
}

.hero-word-primary {
    color: var(--aitsc-primary, #0066ff) !important;
    font-weight: 700 !important;
}

@keyframes fadeInUp {
    to {
        opacity: 1 !important;
        transform: translateY(0) !important;
    }
}

.animate-fade-in {
    opacity: 0 !important;
    animation: fadeIn 1s ease forwards !important;
}

.animate-slide-up {
    opacity: 0 !important;
    transform: translateY(30px) !important;
    animation: slideUp 1s ease forwards !important;
}

.animate-bounce {
    animation: bounce 2s infinite !important;
}

@keyframes fadeIn {
    to {
        opacity: 1 !important;
    }
}

@keyframes slideUp {
    to {
        opacity: 1 !important;
        transform: translateY(0) !important;
    }
}

@keyframes bounce {
    0%, 20%, 50%, 80%, 100% {
        transform: translateY(0) !important;
    }
    40% {
        transform: translateY(-10px) !important;
    }
    60% {
        transform: translateY(-5px) !important;
    }
}

/*--------------------------------------------------------------
>>> DEBUG HELPERS (Remove in production)
--------------------------------------------------------------*/

/*
 Uncomment for debugging layout issues:

 .site-content { outline: 2px solid red; }
 .site-header { outline: 2px solid blue; }
 .hero-container { outline: 2px solid green; }
 .container { outline: 2px solid orange; }
 .section { outline: 2px solid purple; }
*/